<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="${project.groupId}.${project.artifactId}"
	name="${project.artifactId}" plugins-version="2">

	<plugin-info>
		<description>${project.description}</description>
		<version>${project.version}</version>
		<vendor name="${project.organization.name}" url="${project.organization.url}" />
	</plugin-info>

	<component-import key="userManager"
		interface="com.atlassian.sal.api.user.UserManager" />
	<component-import key="loginUriProvider"
		interface="com.atlassian.sal.api.auth.LoginUriProvider" />
	<component-import key="renderer"
		interface="com.atlassian.templaterenderer.velocity.one.six.VelocityTemplateRenderer" />
	<component-import key="pluginSettingsFactory"
		interface="com.atlassian.sal.api.pluginsettings.PluginSettingsFactory" />
	<component-import key="transactionTemplate"
		interface="com.atlassian.sal.api.transaction.TransactionTemplate" />

	<component key="EventListener" class="de.pubflow.jira.JiraManagerPlugin">
		<description>Class that processes the incoming JIRA issue events.
		</description>
	</component>

	<servlet key="admin-servlet" class="de.pubflow.jira.configuration.AdminServlet">
		<url-pattern>/pubflow/admin</url-pattern>
	</servlet>

	<rest key="rest" path="/pubflow-admin" version="1.0">
		<description>Provides REST resources for the admin UI.</description>
	</rest>

	<web-resource name="Settings Resource" key="resources">
		<dependency>com.atlassian.auiplugin:ajs</dependency>
		<resource type="download" name="admin.js" location="/web/admin/admin.js" />
	</web-resource>

	<!-- <web-resource name="Graphviewer Resource" key="resources"> -->
	<!-- <dependency>com.atlassian.auiplugin:ajs</dependency> -->
	<!-- </web-resource> -->

	<resource type="download" name="gwt/" location="gwt/" />


	<gadget key="gwt-gadget" name="GWT Gadget"
		location="gwt/de.pubflow.jira.graph.client.PubFlow_GraphViewer.gadget.xml" />

	<web-item key="jira-menu-item" name="PubFlow Admin"
		section="system.admin/globalsettings" weight="10" application="jira">
		<description>Link to pubflow-admin page.</description>
		<label key="pubflow.admin.label" />
		<link linkId="pubflow-admin-link">/plugins/servlet/pubflow/admin</link>
	</web-item>

	<workflow-condition key="issueAttachment-condition">
		<condition-class>
			de.pubflow.jira.misc.IssueAttachmentCondition
		</condition-class>
	</workflow-condition>

</atlassian-plugin>